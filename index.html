<!doctype html>
<html
  lang="fr"
  class="lenis lenis-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Variable Font Subsetter - Optimisation de polices locales</title>

    <!-- CSS Assets -->
    <link
      rel="stylesheet"
      href="assets/css/app.css" />

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
  </head>
  <body data-layout="boxed">
    <header class="padding-block-xl border-bottom-light">
      <div class="wrapper flow-m">
        <h1 class="title-l text-primary">Variable Font Subsetter</h1>
        <p class="text-m color-dim">
          Optimisez vos polices variables pour le web : s√©lectionnez des axes,
          r√©duisez le jeu de caract√®res et convertissez en WOFF2.
        </p>
      </div>
    </header>

    <main class="wrapper padding-block-xl flow-l">
      <!-- SECTION 1: INPUT -->
      <section class="grid-auto layout-sidebar gap-l">
        <div class="card flow-m padding-l bg-surface-2 radius-m shadow-s">
          <h2 class="title-m">1. Charger une police</h2>

          <div
            id="drop-zone"
            class="drop-zone padding-xl border-dashed radius-m text-center flow-s bg-surface-2 transition-interactive">
            <!-- <div class="icon-l text-primary">üìÅ</div> -->
            <p class="text-l font-bold">
              Importez un fichier de police
            </p>
            <p class="text-m color-dim">
              ( .ttf ou .woff2 ) ou glisser-d√©poser
            </p>

            <input
              type="file"
              id="font-upload"
              accept=".ttf,.woff,.woff2,.otf"
              class="hidden" />

            <div class="margin-top-s">
               <label
                for="font-upload"
                class="btn btn-primary"
                >Parcourir</label
              >
            </div>
          </div>

          </div>
        </div>

        <!-- STATUS / INFO -->
        <div class="card padding-l bg-surface radius-m border-light flow-s">
          <h2 class="title-m">Informations</h2>
          <div
            id="font-info"
            class="text-s color-dim">
            <p>Aucune police charg√©e.</p>
          </div>
        </div>
      </section>

      <hr class="border-light" />

      <div
        id="app-workspace"
        class="grid-auto layout-halves gap-l hidden-aria"
        aria-hidden="true">
        <!-- SECTION 2: SETTINGS (Left Col) -->
        <div class="flow-l">
          <!-- Variable Axes -->
          <section class="card flow-m">
            <h2 class="title-m">2. Axes de variation</h2>
            <p class="text-s color-dim">
              Ajustez les curseurs pour pr√©visualiser. (Note: Le subsetting
              gardera toute la plage de variation par d√©faut pour l'instant).
            </p>
            <div
              id="axes-container"
              class="flow-s">
              <!-- Sliders generated by JS -->
            </div>
          </section>

          <!-- Subsetting Ranges -->
          <section class="card flow-m">
            <h2 class="title-m">3. Jeu de caract√®res (Subsetting)</h2>
            <p class="text-s color-dim">Cochez les plages Unicode √† inclure.</p>

            <div
              class="grid-auto grid-min-150 gap-s"
              id="unicode-ranges">
              <!-- Checkboxes generated by JS -->
              <label
                class="checkbox-card bg-surface border-light padding-s radius-s flex-center-y gap-s">
                <input
                  type="checkbox"
                  name="subset"
                  value="latin"
                  checked />
                <span>Latin Basic</span>
              </label>
              <label
                class="checkbox-card bg-surface border-light padding-s radius-s flex-center-y gap-s">
                <input
                  type="checkbox"
                  name="subset"
                  value="latin-ext" />
                <span>Latin Extended</span>
              </label>
              <!-- More added via JS -->
            </div>
          </section>
        </div>

        <!-- SECTION 3: PREVIEW (Right Col) -->
        <div
          class="flow-l sticky-top"
          style="top: 2rem">
          <section class="card flow-m bg-surface-2 padding-l radius-m shadow-s">
            <header class="flex-between flex-center-y">
              <h2 class="title-m">Pr√©visualisation</h2>
            </header>

            <div
              class="preview-box bg-surface padding-l radius-s border-light flow-m overflow-hidden">
              <p
                id="preview-text"
                class="editable"
                contenteditable="true"
                spellcheck="false"
                style="font-size: 2rem; line-height: 1.2">
                Portez ce vieux whisky au juge blond qui fume.
              </p>
            </div>

            <div class="flex-wrap gap-s border-top-light padding-block-s">
              <div class="input-group flex-1">
                <label for="preview-size">Taille</label>
                <input
                  type="range"
                  id="preview-size"
                  min="12"
                  max="120"
                  value="32" />
              </div>
            </div>
          </section>

          <section
            class="card flow-m bg-primary-light padding-l radius-m border-primary">
            <h2 class="title-m text-primary">4. Exporter</h2>
            <p class="text-s">
              G√©n√®re un fichier .woff2 optimis√© contenant uniquement les
              caract√®res s√©lectionn√©s.
            </p>

            <button
              id="btn-generate"
              class="btn btn-primary width-100 icon-link">
              <span>G√©n√©rer & T√©l√©charger</span>
              <span class="icon">DWN</span>
            </button>
            <div
              id="export-status"
              class="text-s text-center hidden"></div>
          </section>
        </div>
      </div>
    </main>

    <footer class="padding-block-l text-center border-top-light margin-top-xl">
      <p class="text-s color-dim">
        Antigravity &copy; 2025 - Propuls√© par OpenType.js & HarfBuzz (WASM)
      </p>
    </footer>

    <script
      type="module"
      src="/main.js"></script>
  </body>
</html>
